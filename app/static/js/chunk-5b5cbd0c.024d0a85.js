(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b5cbd0c"],{"015e":function(t,e,a){"use strict";a.d(e,"h",(function(){return s})),a.d(e,"i",(function(){return l})),a.d(e,"d",(function(){return r})),a.d(e,"n",(function(){return i})),a.d(e,"e",(function(){return c})),a.d(e,"l",(function(){return o})),a.d(e,"k",(function(){return u})),a.d(e,"j",(function(){return d})),a.d(e,"f",(function(){return p})),a.d(e,"m",(function(){return h})),a.d(e,"g",(function(){return m})),a.d(e,"a",(function(){return f})),a.d(e,"b",(function(){return g})),a.d(e,"c",(function(){return b}));var n=a("337a");function s(){return Object(n["a"])({url:"http://192.168.2.94:80/RestfulApi/Monitor",method:"get"})}function l(){return Object(n["a"])({url:"http://192.168.2.94:80/account/checktree",method:"post"})}function r(t,e,a,s){return Object(n["a"])({url:"http://192.168.2.94:80/account/addtree",method:"post",data:{filename:t,pid:e,file_type:a,uid:s}})}function i(t,e,a,s,l,r,i,c,o,u,d){return Object(n["a"])({url:"http://192.168.2.94:80/account/updatatree",method:"put",data:{id:t,filename:e,file_type:a,meth:s,sc_ip:l,sc_path:r,sc_praameter:i,sc_name:c,concurrency:o,con_praameter:u,strategy:d}})}function c(t){return Object(n["a"])({url:"http://192.168.2.94:80/account/deletetree",method:"DELETE",data:{id:t}})}function o(t,e,a,s){return Object(n["a"])({url:"http://192.168.2.94:80/RestfulApi/ScriptGeneration",method:"post",data:{type:t,hostip:e,hostpath:a,parameter:s}})}function u(t,e){return Object(n["a"])({url:"http://192.168.2.94:80/RestfulApi/Register",method:"post",data:{username:t,password:e}})}function d(t,e,a,s,l){return Object(n["a"])({url:"http://192.168.2.94:80/RestfulApi/Implement",method:"post",data:{Filename:t,Concurrent:e,Dx:a,Xz:s,Ip:l}})}function p(t){return Object(n["a"])({url:"http://192.168.2.94:80/RestfulApi/RealtimeLog",method:"post",data:{data:t}})}function h(t,e,a,s,l,r){return Object(n["a"])({url:"http://192.168.2.94:80/RestfulApi/ScheduledTasks",method:"post",data:{Filename:t,Concurrent:e,Dx:a,Xz:s,Ip:l,Exceptime:r}})}function m(t){return Object(n["a"])({url:"http://192.168.2.94:80/RestfulApi/BatchLog",method:"post",data:{data:t}})}function f(t){return Object(n["a"])({url:"http://192.168.2.94:80/RestfulApi/BatchExecution",method:"post",data:{data:t}})}function g(t){return Object(n["a"])({url:"http://192.168.2.94:80/RestfulApi/BatchRealtimeLog",method:"post",data:{data:t}})}function b(){return Object(n["a"])({url:"http://192.168.2.94:80/RestfulApi/KillAllProcess",method:"get"})}},"06fb":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("我的项目")])]),t._v(" "),a("el-tree",{ref:"tree",attrs:{"show-checkbox":"",data:t.data,"node-key":"id","default-expanded-all":!1,props:t.defaultProps,"expand-on-click-node":!1},on:{check:t.handleCheckChange},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.node;return a("span",{staticClass:"custom-tree-node"},[n.label.length<=10?a("span",[t._v(t._s(n.label))]):n.label.length>10?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:n.label,placement:"top"}},[a("span",[t._v(t._s(n.label.length>10?n.label.slice(0,10)+"...":n.label))])]):t._e()],1)}}])})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("已选脚本")])]),t._v(" "),a("ul",t._l(t.list,(function(e){return a("li",{key:e.id,staticClass:"listStyle"},[t._v("\n              "+t._s(e.label)+"\n            ")])})),0)]),t._v(" "),t._l(t.list,(function(e){return a("el-card",{key:e.id,staticClass:"configMsg"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("脚本配置")])]),t._v(" "),a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"当前项目"}},[t._v("\n              "+t._s(t.currentNodeName)+"\n            ")]),t._v(" "),a("el-form-item",{attrs:{label:"请求类型"}},[a("el-select",{attrs:{disabled:!0,value:e.meth,placeholder:"请选择请求类型"}},[a("el-option",{attrs:{label:"POST",value:"POST"}}),t._v(" "),a("el-option",{attrs:{label:"GET",value:"GET"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"域名"}},[a("el-input",{attrs:{disabled:!0,value:e.sc_ip}})],1),t._v(" "),a("el-form-item",{attrs:{label:"路由地址"}},[a("el-input",{attrs:{disabled:!0,value:e.sc_path}})],1),t._v(" "),a("el-form-item",{attrs:{label:"接口参数"}},[a("el-input",{attrs:{disabled:!0,value:e.sc_praameter,type:"textarea"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"并发数"}},[a("el-input",{attrs:{disabled:!0,value:e.concurrency}})],1),t._v(" "),a("el-form-item",{attrs:{label:"运行选择"}},[a("el-select",{staticClass:"runType",attrs:{disabled:!0,value:e.strategy,placeholder:"请选择运行方式"}},[a("el-option",{attrs:{label:"运行时间",value:"-t"}}),t._v(" "),a("el-option",{attrs:{label:"循环次数",value:"-l"}})],1),t._v(" "),a("el-input",{staticClass:"runTime",attrs:{disabled:!0,value:e.con_praameter}})],1),t._v(" "),a("el-form-item",{attrs:{label:"IP或域名"}},[a("el-input",{attrs:{disabled:!0,value:e.sc_ip}})],1)],1)],1)})),t._v(" "),a("el-button",{staticClass:"run-btn",attrs:{type:"primary"},on:{click:t.handleRun}},[t._v("运行")]),t._v(" "),a("el-button",{staticClass:"run-btn",attrs:{type:"primary"},on:{click:t.handleEndScript}},[t._v("结束")])],2),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("日志详情")])]),t._v(" "),t._l(t.resultLog,(function(e){return a("el-card",{key:e.logname,staticClass:"configMsg"},[a("div",[t._v(t._s(e.logname))]),t._v(" "),a("br"),t._v(" "),e.logname?a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:10},value:e.logconet}}):t._e()],1)}))],2)],1)],1)],1)},s=[],l=a("015e"),r={data:function(){return{logContent:"123",logname:"345",currentNodeName:"",scriptBtn:"运行",data:[],defaultProps:{children:"children",label:"label"},uid:"10086",list:[],checkFlag:!1,resultLog:[],clock:null,isFlag:!0}},mounted:function(){this.getTree()},methods:{handleEndScript:function(){var t=this;Object(l["c"])().then((function(e){console.log(e),200===e.code?t.$message({message:e.msg,type:"success"}):t.$message({message:e.msg,type:"warn"})}))},getTree:function(){var t=this;Object(l["i"])().then((function(e){if(200===e.code){var a=e.date;t.data=a}else t.$message({message:e.msg,type:"warning"})}))},handleRun:function(){for(var t=this,e=[],a=0;a<this.list.length;a++){var n={Filename:"",Concurrent:"",Dx:"",Xz:"",Ip:""};n.Filename=this.list[a].sc_name,n.Concurrent=this.list[a].concurrency,n.Dx=this.list[a].strategy,n.Xz=this.list[a].con_praameter,n.Ip=this.list[a].sc_ip,e.push(n)}this.isFlag?(this.isFlag=!1,Object(l["a"])(e).then((function(e){200===e.code?(t.isFlag=!0,t.clock=setInterval(t.getBatchLog,3e3)):t.$message({message:e.msg,type:"warning"})}))):this.$message({message:"尚有脚本未执行完成，不能多次运行",type:"warning"})},handleCheckChange:function(t,e){var a=this;this.checkFlag=!this.checkFlag,this.list=[],e.checkedNodes.length&&e.checkedNodes.map((function(t){2===t.file_type&&a.list.push(t)})),console.log(this.list),0===this.list.length&&this.checkFlag&&this.$message({message:"123",type:"warning"})},getBatchLog:function(){var t=this,e=[];this.list.map((function(t){var a={scriptname:""};a.scriptname=t.sc_name,e.push(a)})),Object(l["b"])(e).then((function(e){200===e.code?"null"===e.data.resultlog?(t.resultLog=[],clearInterval(t.clock),t.getResultLog()):t.resultLog=e.data.resultlog:t.$message({message:e.msg,type:"warning"})}))},getResultLog:function(){var t=this;this.list.map((function(e){var a=[{scriptname:e.sc_name}];Object(l["g"])(a).then((function(e){if(200===e.code){var a={logname:"",logconet:""};a.logname=e.data.logname,a.logconet=e.data.resultlog.slice(-8).join("; "),t.resultLog.push(a)}else t.$message({message:e.msg,type:"warning"})}))}))}}},i=r,c=(a("80b6"),a("2877")),o=Object(c["a"])(i,n,s,!1,null,"2b3758e3",null);e["default"]=o.exports},"80b6":function(t,e,a){"use strict";var n=a("c3d3"),s=a.n(n);s.a},c3d3:function(t,e,a){}}]);