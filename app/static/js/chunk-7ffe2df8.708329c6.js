(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ffe2df8"],{"015e":function(e,t,a){"use strict";a.d(t,"j",(function(){return r})),a.d(t,"m",(function(){return l})),a.d(t,"d",(function(){return s})),a.d(t,"r",(function(){return i})),a.d(t,"f",(function(){return o})),a.d(t,"q",(function(){return c})),a.d(t,"p",(function(){return d})),a.d(t,"n",(function(){return u})),a.d(t,"h",(function(){return m})),a.d(t,"i",(function(){return f})),a.d(t,"a",(function(){return p})),a.d(t,"c",(function(){return h})),a.d(t,"k",(function(){return g})),a.d(t,"l",(function(){return b})),a.d(t,"g",(function(){return v})),a.d(t,"o",(function(){return _})),a.d(t,"b",(function(){return k})),a.d(t,"e",(function(){return C}));var n=a("337a");function r(){return Object(n["a"])({url:"/RestfulApi/Monitor",method:"get"})}function l(e){return Object(n["a"])({url:"/OperationTree/PerformanceTreeCheck",method:"post",data:{uid:e}})}function s(e,t,a,r,l){return Object(n["a"])({url:"/OperationTree/PerformanceTree",method:"post",data:{filename:e,pid:t,file_type:a,uid:r,project_type:2,Permission_parameters:l}})}function i(e){return Object(n["a"])({url:"/OperationTree/PerformanceTree",method:"put",data:e})}function o(e,t){return Object(n["a"])({url:"/OperationTree/PerformanceTree",method:"DELETE",data:{id:e,Permission_parameters:t}})}function c(e){return Object(n["a"])({url:"/RestfulApi/ScriptGeneration",method:"post",data:e})}function d(e,t){return Object(n["a"])({url:"/RestfulApi/Register",method:"post",data:{username:e,password:t}})}function u(e){return Object(n["a"])({url:"/RestfulApi/Implement",method:"post",data:e})}function m(e){return Object(n["a"])({url:"/RestfulApi/RealtimeLog",method:"post",data:{data:e}})}function f(e){return Object(n["a"])({url:"/RestfulApi/BatchLog",method:"post",data:{data:e}})}function p(e){return Object(n["a"])({url:"/RestfulApi/BatchExecution",method:"post",data:e})}function h(){return Object(n["a"])({url:"/RestfulApi/KillAllProcess",method:"get"})}function g(e){return Object(n["a"])({url:"/RestfulFile/ScriptGeneration",method:"post",data:e})}function b(e){return Object(n["a"])({url:"/RestfulFile/UploadScript",method:"post",data:e})}function v(e){var t=e.file_name;return Object(n["a"])({url:"/AuxiliaryFunction/PressureMeasurement",method:"POST",data:{file_name:t}})}function _(e){var t=e.useremail,a=e.datamsg;return Object(n["a"])({url:"/AuxiliaryFunction/ResultEmail",method:"post",data:{useremail:t,datamsg:a}})}function k(e){return Object(n["a"])({url:"/RestfulFile/Checkcomplete",method:"post",data:e})}function C(e){return Object(n["a"])({url:"/RestfulFile/Checklogexsits",method:"post",data:e})}},"06fb":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",[a("el-row",[a("el-col",{attrs:{offset:19}},[e.data.length>0?["admin"===e.data[0].tree_authority||-1!==e.data[0].tree_authority.indexOf(16)?a("el-button",{staticClass:"run-btn",attrs:{type:"primary"},on:{click:e.timing}},[e._v("定时运行")]):e._e(),e._v(" "),"admin"===e.data[0].tree_authority||-1!==e.data[0].tree_authority.indexOf(16)?a("el-button",{staticClass:"run-btn",attrs:{type:"primary"},on:{click:e.handleRun}},[e._v("运行")]):e._e(),e._v(" "),"admin"===e.data[0].tree_authority||-1!==e.data[0].tree_authority.indexOf(16)?a("el-button",{staticClass:"run-btn",attrs:{type:"primary"},on:{click:e.handleEndScript}},[e._v("结束")]):e._e()]:e._e()],2)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("el-card",{staticClass:"box-card",attrs:{id:"cardtree"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("我的项目")])]),e._v(" "),a("el-scrollbar",{staticStyle:{height:"100%"}},[a("el-tree",{ref:"tree",attrs:{"show-checkbox":"",data:e.data,"node-key":"id","default-expanded-all":!1,props:e.defaultProps,"expand-on-click-node":!1},on:{check:e.handleCheckChange},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node;return a("span",{staticClass:"custom-tree-node"},[n.label.length<=10?a("span",[e._v(e._s(n.label))]):n.label.length>10?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:n.label,placement:"top"}},[a("span",[e._v(e._s(n.label.length>10?n.label.slice(0,10)+"...":n.label))])]):e._e()],1)}}])})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("已选脚本")])]),e._v(" "),a("selected",{attrs:{selecteddata:e.selecteddata}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("日志详情")])]),e._v(" "),e._l(e.resultLog,(function(t){return a("el-card",{key:t.logname,staticClass:"configMsg"},[a("div",[e._v(e._s(t.logname))]),e._v(" "),a("br"),e._v(" "),t.logname?a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:10},value:t.logconet}}):e._e()],1)}))],2)],1)],1),e._v(" "),a("timerdialog",{ref:"timerdialog"})],1)},r=[],l=(a("ac6a"),a("a481"),a("96cf"),a("3b8d")),s=(a("c5f6"),a("ad4b")),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"selected"}},e._l(e.selecteddata.data,(function(t,n){return a("el-collapse",{key:n,attrs:{accordion:""},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-collapse-item",{attrs:{title:t.Filename,name:n}},[a("el-form",{ref:"form",refInFor:!0,attrs:{model:t,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"文件名"}},[a("el-input",{attrs:{disabled:""},model:{value:t.Filename,callback:function(a){e.$set(t,"Filename",a)},expression:"item.Filename"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Concurrent"}},[a("el-input",{attrs:{disabled:""},model:{value:t.Concurrent,callback:function(a){e.$set(t,"Concurrent",a)},expression:"item.Concurrent"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Dx"}},[a("el-input",{attrs:{disabled:""},model:{value:t.Dx,callback:function(a){e.$set(t,"Dx",a)},expression:"item.Dx"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Xz"}},[a("el-input",{attrs:{disabled:""},model:{value:t.Xz,callback:function(a){e.$set(t,"Xz",a)},expression:"item.Xz"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Ip"}},[a("el-input",{attrs:{disabled:""},model:{value:t.Ip,callback:function(a){e.$set(t,"Ip",a)},expression:"item.Ip"}})],1)],1)],1)],1)})),1)},o=[],c={props:["selecteddata"],data:function(){return{activeName:0,list:[{Filename:"张三",Concurrent:"1",Dx:"-t",Xz:"100",Ip:"qa01-teacher.xuebadev.com"},{Filename:"张三",Concurrent:"1",Dx:"-t",Xz:"100",Ip:"qa01-teacher.xuebadev.com"}]}},created:function(){console.log(this.selecteddata,"子组件")}},d=c,u=a("2877"),m=Object(u["a"])(d,i,o,!1,null,"a19fa6a0",null),f=m.exports,p=a("015e"),h=(a("b64a"),a("5c96"),a("56b3"),{components:{selected:f,timerdialog:s["a"]},data:function(){return{selecteddata:{},data:[],defaultProps:{children:"children",label:"label"},resultLog:[]}},created:function(){this.getTree()},methods:{timing:function(){this.$refs.timerdialog.dialogTableVisible=!0},handleEndScript:function(){var e=this;Object(p["c"])().then((function(t){console.log(t),200===t.statusCode?e.$message({message:t.msg,type:"success"}):e.$message({message:t.msg,type:"warn"})}))},getTree:function(){var e=this,t=window.localStorage.getItem("uid");Object(p["m"])(Number(t)).then((function(t){if(200===t.statusCode){var a=t.date;e.data=a}else e.$message({message:t.msg,type:"warning"})}))},handleRun:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,a,n,r,l,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=window.localStorage.getItem("username").slice(0,window.localStorage.getItem("username").indexOf("@")).replace(".",""),console.log(t),e.next=4,Object(p["e"])({username:t});case 4:return a=e.sent,void 0!==a&&this.$message.warning(a.msg),e.next=8,Object(p["a"])(this.selecteddata);case 8:n=e.sent,200!==n.statusCode?this.$message.info(n.msg):this.$message.success(n.msg),r=[],this.selecteddata.data.forEach((function(e){r.push(e.Filename)})),r={scriptname:r},console.log(r),l=setInterval((function(){Object(p["b"])(r).then((function(e){if(console.log(e),"0"===e.status){window.clearInterval(l);var t=window.localStorage.getItem("username").slice(0,window.localStorage.getItem("username").indexOf("@")).replace(".","");t="/mnt/fulllinklogs/datalogs/test_environmen/datalogs-"+t+".log";Object(p["g"])({file_name:t}).then((function(e){if(200!==e.statusCode)return s.$message.info("log日志读取错误");s.$message.success(e.msg),Object(p["o"])({useremail:window.localStorage.getItem("username"),datamsg:e.data.data_list[0].join("\n")}).then((function(e){if(200!==e.statusCode)return s.$message.info("邮件发送失败");s.$message.success(e.msg)}))}))}}))}),5e3);case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleCheckChange:function(e,t){console.log(t);var a={};a.Permission_parameters={type:2,tree_id:2,uid:Number(window.localStorage.getItem("uid"))};e=[];var n=t.checkedNodes.filter((function(e){return 4===e.level}));console.log(n),n.forEach((function(t){console.log(JSON.parse(t.link_parameters));var a={};a.Filename=JSON.parse(t.link_parameters)&&JSON.parse(t.link_parameters).filename,a.Concurrent=JSON.parse(t.link_parameters)&&JSON.parse(t.link_parameters).consoleConfigForm.concurrency,a.Dx=JSON.parse(t.link_parameters)&&JSON.parse(t.link_parameters).consoleConfigForm.strategy,a.Xz=JSON.parse(t.link_parameters)&&JSON.parse(t.link_parameters).consoleConfigForm.con_praameter,a.Ip=JSON.parse(t.link_parameters)&&JSON.parse(t.link_parameters).comfaceArr[0].hostip,e.push(a)})),a.data=e,this.selecteddata=a,console.log(this.selecteddata,"这个是data这个是data这个是data这个是data")}}}),g=h,b=(a("943d"),Object(u["a"])(g,n,r,!1,null,"1af97de6",null));t["default"]=b.exports},1:function(e,t){},2:function(e,t){},"3d81":function(e,t,a){"use strict";var n=a("a351"),r=a.n(n);r.a},"943d":function(e,t,a){"use strict";var n=a("d94d"),r=a.n(n);r.a},a351:function(e,t,a){},ad4b:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"timerdialog"}},[a("el-dialog",{attrs:{title:"设置定时任务",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-table",{attrs:{data:e.gridData}},[a("el-table-column",{attrs:{property:"date",label:"一级树名称",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{property:"name",label:"脚本名称",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{property:"address",label:"创建人"}})],1),e._v(" "),a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[e._v("选择定时运行时间")]),e._v(" "),a("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择定时运行时间","default-time":"12:00:00"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),e._v(" "),a("div",{staticStyle:{margin:"15px 0"}},[e._v("选择运行周期")]),e._v(" "),a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),e._v(" "),a("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange},model:{value:e.checkedCities,callback:function(t){e.checkedCities=t},expression:"checkedCities"}},e._l(e.cities,(function(t){return a("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(t))])})),1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.dialogok}},[e._v("确 定")])],1)],1)],1)},r=[];a("337a");var l=["星期一","星期二","星期三","星期四","星期五","星期六","星期日"],s={data:function(){return{gridData:[{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"}],dialogTableVisible:!1,value:"",checkAll:!1,checkedCities:["星期一","星期二"],cities:l,isIndeterminate:!0}},methods:{handleCheckAllChange:function(e){this.checkedCities=e?l:[],this.isIndeterminate=!1},handleCheckedCitiesChange:function(e){var t=e.length;this.checkAll=t===this.cities.length,this.isIndeterminate=t>0&&t<this.cities.length},dialogok:function(){this.dialogTableVisible=!1}}},i=s,o=(a("3d81"),a("2877")),c=Object(o["a"])(i,n,r,!1,null,"5cb4d02e",null);t["a"]=c.exports},d94d:function(e,t,a){}}]);